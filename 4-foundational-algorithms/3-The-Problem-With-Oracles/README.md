# The Problem with Oracles
Oracle問題について

## memo
Oracle問題
* 入力に対して特定の出力を返すブラックボックス
  * 期待した出力になる入力を推定することは困難
  * 一方、入力が与えられるとすぐに出力が分かる
  * 例えば、10桁の数値を入力として、それがある20桁の数値の素因数かどうかを判定するケース

問合せ問題
* Oracleの一例
* ゴールは、最小の問合せで隠れた規則性を推定できるようにすること

∣x,y⟩ -> ∣x,y⊕f(x)⟩:U
* y=0の場合、∣x,0⟩ -> ∣x,f(x)⟩:U
* f(x)は4種類の可能性がある
* xにHadamard gateを適用すると、 U(∣0,0⟩ + ∣1,0⟩) = U(∣0,0⟩) + U(∣1,0⟩) = ∣0,f(0)⟩ + ∣1,f(1)⟩
  * 測定すると特定の状態で固定されるため、可能性のある出力を全て得ることはできない

Deutsch problem
* f(x)が常に同じ値なのか、半分の確率で0と1が出るのか、というパターンに関する問題
* ターゲットレジスタにHadamard gateを適用してみる
  * U(∣x,+⟩) = ∣x,f(x)⟩ + ∣x,NOT(f(x))⟩
    * f(x)=0の場合、∣x,f(x)⟩ + ∣x,NOT(f(x))⟩ = ∣x,0⟩ + ∣x,1⟩
    * f(x)=1の場合、∣x,f(x)⟩ + ∣x,NOT(f(x))⟩ = ∣x,1⟩ + ∣x,0⟩ = ∣x,0⟩ + ∣x,1⟩
    * f(x)=0、f(x)=1で同じ出力になるので区別できない
* ターゲットレジスタを1にしてHadamard gateを適用してみる
  * U(∣x,-⟩) = ∣x,f(x)⟩ - ∣x,NOT(f(x))⟩
    * f(x)=0の場合、∣x,0⟩ - ∣x,1⟩ = ∣x,-⟩
    * f(x)=1の場合、∣x,1⟩ - ∣x,0⟩ = -∣x,-⟩
    * f(x)=xの場合、∣x,x⟩ - ∣x,NOT(x)⟩
      * x=0の場合、∣0,0⟩ - ∣0,1⟩ = ∣0,-⟩
      * x=1の場合、∣1,1⟩ - ∣1,0⟩ = -∣1,-⟩
    * f(x)=NOT(x)の場合、∣x,NOT(x)⟩ - ∣x,x⟩
      * x=0の場合、∣0,1⟩ - ∣0,0⟩ = -∣0,-⟩
      * x=1の場合、∣1,0⟩ - ∣1,1⟩ = ∣1,-⟩
    * f(x)=0とf(x)=1で出力の位相が変わっているので区別できる
    * U(∣x,-⟩) = (−1)^f(x) ∣x,−⟩
      * ターゲットレジスタだけではなく、データレジスタにも影響がある
      * 位相クエリというアプローチ

入力を重ね合わせの状態にすると
* U(∣H(x),-⟩) = U∣+,-⟩ = (−1)^f(x) ∣x,−⟩ = (−1)^f(0) ∣0,−⟩ + (−1)^f(1) ∣1,−⟩
* f(x)のバリエーションによって出力がどう変わるか(係数は無視)
  * Constant
    * ∣0,−⟩ + ∣1,−⟩ = ∣+,−⟩
  * Balanced
    * ∣0,−⟩ - ∣1,−⟩ = ∣-,−⟩
  * 出力にHadamard gateを適用することで、計算基底でHadamard基底での状態を測定できる
* 1回の測定で関数のパターンが判別できた
  * 古典的なクエリだと2回の計測が必要


